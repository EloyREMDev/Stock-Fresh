import{P as u,d as I,p as f}from"./products.module.oR8XwO8S.js";import"./notificiation.DyHDLNjw.js";import"./endpoints.QH1VciTq.js";import"./index.B9b1t7QR.js";import"./index.CViUNx8d.js";document.addEventListener("DOMContentLoaded",async()=>{const o=document.getElementById("products-list"),s=document.getElementById("product-item-template");if(!o||!s){console.error("No se encontró el contenedor de la lista o la plantilla.");return}await u.getDolarRate();const a=I.get(),l=n=>{if(o.innerHTML="",n.length===0){const t=document.createElement("p");t.textContent="No hay productos disponibles.",t.className="text-center text-lg text-gray-500",o.appendChild(t);return}n.forEach(t=>{const e=s.content.cloneNode(!0).querySelector("li");if(!e)return;e.dataset.productId=t.id;const p=e.querySelector(".product-name-input"),m=e.querySelector(".product-description-input"),c=e.querySelector(".product-price-input"),i=e.querySelector(".product-price-bs-input"),y=e.querySelector(".product-quantity-input"),g=e.querySelector(".product-min-stock-input"),v=e.querySelector(".product-manufacturer-input");p.value=t.name,m.value=t.description,c.value=t.price.toFixed(2),i.value=(t.price*a).toFixed(2),y.value=String(t.quantity),g.value=String(t.minimum_stock),v.value=t.manufacturer,c.addEventListener("input",q=>{const d=parseFloat(c.value);isNaN(d)?i.value="":i.value=(d*a).toFixed(2)}),o.appendChild(e)})};f.listen(n=>{l(n)}),await u.getProducts(),o.addEventListener("click",async n=>{const t=n.target,r=t.closest("li");if(!r)return;const e=r.dataset.productId;t.closest(".delete-btn")&&confirm("¿Estás seguro de que quieres eliminar este producto?")&&await u.removeProduct(e),t.closest(".edit-btn")&&console.log(`Editar producto con ID: ${e}`)})});
